<IfModule mod_ssl.c>
    <VirtualHost *:443>
        DocumentRoot /shared/httpd/secure.blnsoftware.com
        ServerAdmin domains@rcncapital.com
        ServerName secure.blnsoftware.com
        ErrorLog /usr/local/apache2/logs/secure-error.log
        CustomLog /usr/local/apache2/logs/secure-access.log combined
        SSLEngine on
        SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
        SSLCertificateFile /etc/ssl/certs/_blnsoftware_com.crt
        SSLCertificateKeyFile /etc/ssl/private/blnsoftware.com.key
        # PHP-FPM Definition
        <FilesMatch \.php$>
            SSLOptions +StdEnvVars
            Require all granted
            SetHandler proxy:fcgi://172.16.238.10:9000
        </FilesMatch>
        
        <Proxy "fcgi://172.16.238.10:9000/">
            ProxySet timeout=180
            ProxySet connectiontimeout=180
        </Proxy>
        <Directory /usr/local/apache2/cgi-bin>
            SSLOptions +StdEnvVars
        </Directory>
        <Directory />
            Options FollowSymLinks
            AllowOverride all
        </Directory>
        <Directory /shared/httpd/secure.blnsoftware.com>
            Header set Access-Control-Allow-Origin "*"
            Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" env=HTTPS
            AllowOverride all
            allow from all
            Options +FollowSymLinks +SymLinksIfOwnerMatch
            Require all granted
        </Directory>
    </VirtualHost>
    <VirtualHost *:443>
        DocumentRoot /shared/httpd/api.blnsoftware.com
        ServerAdmin devops@blnsoftware.com
        ServerName api.blnsoftware.com
        ErrorLog /usr/local/apache2/api-error.log
        CustomLog /usr/local/apache2/api-access.log combined
        SSLEngine on
        SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1
        <FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
            Require all granted
            SetHandler proxy:fcgi://172.16.238.10:9000
        </FilesMatch>
        <Proxy "fcgi://172.16.238.10:9000/">
            ProxySet timeout=180
            ProxySet connectiontimeout=180
        </Proxy>
        <Directory /usr/local/apache2/cgi-bin>
            SSLOptions +StdEnvVars
        </Directory>
        <Directory />
            Options +MultiViews
            AllowOverride none
            Order Allow,Deny
            Allow from all
        </Directory>
        <Directory "/shared/httpd/api.blnsoftware.com">
            Header set Access-Control-Allow-Origin "*"
            Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" env=HTTPS
            AllowOverride all
            allow from all
            Options +FollowSymLinks +SymLinksIfOwnerMatch -Indexes
            Require all granted
        </Directory>
            SSLCertificateFile /etc/ssl/certs/_blnsoftware_com.crt
            SSLCertificateKeyFile /etc/ssl/private/blnsoftware.com.key
            SSLCertificateChainFile /etc/ssl/certs/_blnsoftware.com.ca
    </VirtualHost>
    <VirtualHost *:443>
        DocumentRoot "/shared/httpd/cake3.blnsoftware.com"
        ServerName cake3.blnsoftware.com
        ServerAlias broker.blnsoftware.com borrower.blnsoftware.com lender.blnsoftware.com coordinator.blnsoftware.com realms.blnsoftware.com
        ServerAdmin devops@blnsoftware.com
        ErrorLog /usr/local/apache2/cake3-error.log
        CustomLog /usr/local/apache2/cake3-access.log combined
        SSLEngine on
        SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1
        <FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
            Require all granted
            SetHandler proxy:fcgi://172.16.238.10:9000
        </FilesMatch>
        <Directory /usr/local/apache2/cgi-bin>
            SSLOptions +StdEnvVars
        </Directory>
        <Directory />
            Options +MultiViews
            AllowOverride none
            Order Allow,Deny
            Allow from all
        </Directory>
        <Directory "/shared/httpd/cake3.blnsoftware.com">
            Header set Access-Control-Allow-Origin "*"
            Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" env=HTTPS
            AllowOverride all
            allow from all
            Options +FollowSymLinks +SymLinksIfOwnerMatch -Indexes
            Require all granted
        </Directory>
            SSLCertificateFile /etc/ssl/certs/_blnsoftware_com.crt
            SSLCertificateKeyFile /etc/ssl/private/blnsoftware.com.key
            SSLCertificateChainFile /etc/ssl/certs/_blnsoftware.com.ca
    </VirtualHost>
</IfModule>